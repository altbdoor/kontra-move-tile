(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();/**
 * @preserve
 * Kontra.js v9.0.0
 */let I=()=>{},ht="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);";function Q(i,t){let e=t.parentNode;if(i.setAttribute("data-kontra",""),e){let s=e.querySelector("[data-kontra]:last-of-type")||t;e.insertBefore(i,s.nextSibling)}else document.body.appendChild(i)}function G(i,t){let e=i.indexOf(t);if(e!=-1)return i.splice(e,1),!0}let A={};function Y(i,t){A[i]=A[i]||[],A[i].push(t)}function ot(i,t){A[i]=(A[i]||[]).filter(e=>e!=t)}function D(i,...t){(A[i]||[]).map(e=>e(...t))}let E,R,Z={get(i,t){return t=="_proxy"?!0:I}};function W(){return E}function w(){return R}function lt(i,{contextless:t=!1}={}){if(E=document.getElementById(i)||i||document.querySelector("canvas"),t&&(E=E||new Proxy({},Z)),!E)throw Error("You must provide a canvas element for the game");return R=E.getContext("2d")||new Proxy({},Z),R.imageSmoothingEnabled=!1,D("init"),{canvas:E,context:R}}class N{constructor({spriteSheet:t,frames:e,frameRate:s,loop:r=!0,name:a}){let{width:n,height:h,margin:o=0}=t.frame;Object.assign(this,{spriteSheet:t,frames:e,frameRate:s,loop:r,name:a,width:n,height:h,margin:o,isStopped:!1,_f:0,_a:0})}clone(){return new N(this)}start(){this.isStopped=!1,this.loop||this.reset()}stop(){this.isStopped=!0}reset(){this._f=0,this._a=0}update(t=1/60){if(!this.isStopped){if(!this.loop&&this._f==this.frames.length-1){this.stop();return}for(this._a+=t;this._a*this.frameRate>=1;)this._f=++this._f%this.frames.length,this._a-=1/this.frameRate}}render({x:t,y:e,width:s=this.width,height:r=this.height,context:a=w()}){let n=this.frames[this._f]/this.spriteSheet._f|0,h=this.frames[this._f]%this.spriteSheet._f|0;a.drawImage(this.spriteSheet.image,h*this.width+(h*2+1)*this.margin,n*this.height+(n*2+1)*this.margin,this.width,this.height,t,e,s,r)}}function dt(){return new N(...arguments)}let ct=/(jpeg|jpg|gif|png|webp)$/,ft=/(wav|mp3|ogg|aac)$/,z=/^\//,ut=/\/$/,j=new WeakMap,pt="",mt="",yt="";function b(i,t){return new URL(i,t).href}function q(i,t){return[i.replace(ut,""),i?t.replace(z,""):t].filter(e=>e).join("/")}function K(i){return i.split(".").pop()}function B(i){let t=i.replace("."+K(i),"");return t.split("/").length==2?t.replace(z,""):t}function gt(i){return{wav:i.canPlayType('audio/wav; codecs="1"'),mp3:i.canPlayType("audio/mpeg;"),ogg:i.canPlayType('audio/ogg; codecs="vorbis"'),aac:i.canPlayType("audio/aac;")}}let _={},O={},v={};function J(){window.__k||(window.__k={dm:j,u:b,d:v,i:_})}function wt(i){return J(),new Promise((t,e)=>{let s,r,a;if(s=q(pt,i),_[s])return t(_[s]);r=new Image,r.onload=function(){a=b(s,window.location.href),_[B(i)]=_[s]=_[a]=this,D("assetLoaded",this,i),t(this)},r.onerror=function(){e("Unable to load image "+s)},r.src=s})}function _t(i){return new Promise((t,e)=>{let s=i,r,a,n,h;if(r=new Audio,a=gt(r),i=[].concat(i).reduce((o,l)=>o||(a[K(l)]?l:null),0),!i)return e("cannot play any of the audio formats provided "+s);if(n=q(mt,i),O[n])return t(O[n]);r.addEventListener("canplay",function(){h=b(n,window.location.href),O[B(i)]=O[n]=O[h]=this,D("assetLoaded",this,i),t(this)}),r.onerror=function(){e("Unable to load audio "+n)},r.src=n,r.load()})}function xt(i){J();let t,e;return t=q(yt,i),v[t]?Promise.resolve(v[t]):fetch(t).then(s=>{if(!s.ok)throw s;return s.clone().json().catch(()=>s.text())}).then(s=>(e=b(t,window.location.href),typeof s=="object"&&j.set(s,e),v[B(i)]=v[t]=v[e]=s,D("assetLoaded",s,i),s))}function Et(...i){return J(),Promise.all(i.map(t=>{let e=K([].concat(t)[0]);return e.match(ct)?wt(t):e.match(ft)?_t(t):xt(t)}))}function vt(i,t){let e=Math.sin(t),s=Math.cos(t);return{x:i.x*s-i.y*e,y:i.x*e+i.y*s}}function S(i,t,e){return Math.min(Math.max(i,e),t)}function Lt(i,t){return[i,t]=[i,t].map(e=>tt(e)),i.x<t.x+t.width&&i.x+i.width>t.x&&i.y<t.y+t.height&&i.y+i.height>t.y}function tt(i){let{x:t=0,y:e=0,width:s,height:r}=i.world||i;return i.mapwidth&&(s=i.mapwidth,r=i.mapheight),i.anchor&&(t-=s*i.anchor.x,e-=r*i.anchor.y),s<0&&(t+=s,s*=-1),r<0&&(e+=r,r*=-1),{x:t,y:e,width:s,height:r}}class L{constructor(t=0,e=0,s={}){t.x!=null?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),s._c&&(this.clamp(s._a,s._b,s._d,s._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new L(this.x+t.x,this.y+t.y,this)}subtract(t){return new L(this.x-t.x,this.y-t.y,this)}scale(t){return new L(this.x*t,this.y*t)}normalize(t=this.length()||1){return new L(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,s,r){this._c=!0,this._a=t,this._b=e,this._d=s,this._e=r}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?S(this._a,this._d,t):t}set y(t){this._y=this._c?S(this._b,this._e,t):t}}function H(){return new L(...arguments)}class At{constructor(t){return this.init(t)}init(t={}){this.position=H(),this.velocity=H(),this.acceleration=H(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let s=this.velocity;t&&(s=s.scale(t)),this.position=this.position.add(s),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class et extends At{init({width:t=0,height:e=0,context:s=w(),render:r=this.draw,update:a=this.advance,children:n=[],anchor:h={x:0,y:0},opacity:o=1,rotation:l=0,scaleX:d=1,scaleY:c=1,...p}={}){this._c=[],super.init({width:t,height:e,context:s,anchor:h,opacity:o,rotation:l,scaleX:d,scaleY:c,...p}),this._di=!0,this._uw(),this.addChild(n),this._rf=r,this._uf=a,Y("init",()=>{this.context??(this.context=w())})}update(t){this._uf(t),this.children.map(e=>e.update&&e.update(t))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),(this.scaleX!=1||this.scaleY!=1)&&t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,s=-this.height*this.anchor.y;(e||s)&&t.translate(e,s),this.context.globalAlpha=this.opacity,this._rf(),(e||s)&&t.translate(-e,-s),this.children.map(a=>a.render&&a.render()),t.restore()}draw(){}_pc(){this._uw(),this.children.map(t=>t._pc())}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:s=1,_wr:r=0,_wsx:a=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=s*this.opacity,this._wsx=a*this.scaleX,this._wsy=n*this.scaleY,this._wx=this._wx*a,this._wy=this._wy*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=r+this.rotation;let{x:h,y:o}=vt({x:this._wx,y:this._wy},r);this._wx=h,this._wy=o,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...t){t.flat().map(e=>{this.children.push(e),e.parent=this,e._pc=e._pc||I,e._pc()})}removeChild(...t){t.flat().map(e=>{G(this.children,e)&&(e.parent=null,e._pc())})}get opacity(){return this._opa}set opacity(t){this._opa=S(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class Ot extends et{init({image:t,width:e=t?t.width:void 0,height:s=t?t.height:void 0,...r}={}){super.init({image:t,width:e,height:s,...r})}get animations(){return this._a}set animations(t){let e,s;this._a={};for(e in t)this._a[e]=t[e].clone(),s=s||this._a[e];this.currentAnimation=s,this.width=this.width||s.width,this.height=this.height||s.height}playAnimation(t){var e;(e=this.currentAnimation)==null||e.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){var e;super.advance(t),(e=this.currentAnimation)==null||e.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function V(){return new Ot(...arguments)}function Tt(i){let t=i.canvas;i.clearRect(0,0,t.width,t.height)}function Mt({fps:i=60,clearCanvas:t=!0,update:e=I,render:s,context:r=w(),blur:a=!1}={}){if(!s)throw Error("You must provide a render() function");let n=0,h=1e3/i,o=1/i,l=t?Tt:I,d,c,p,u,y,g=!0;a||(window.addEventListener("focus",()=>{g=!0}),window.addEventListener("blur",()=>{g=!1})),Y("init",()=>{y.context??(y.context=w())});function m(){if(c=requestAnimationFrame(m),!!g&&(p=performance.now(),u=p-d,d=p,!(u>1e3))){for(D("tick"),n+=u;n>=h;)y.update(o),n-=h;l(y.context),y.render()}}return y={update:e,render:s,isStopped:!0,context:r,start(){d=performance.now(),this.isStopped=!1,requestAnimationFrame(m)},stop(){this.isStopped=!0,cancelAnimationFrame(c)},_frame:m,set _last(x){d=x}},y}let It={},St={},k={},M={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function it(i=I,t){i._pd&&t.preventDefault(),i(t)}function Dt(i){let t=M[i.code],e=It[t];k[t]=!0,it(e,i)}function Ct(i){let t=M[i.code],e=St[t];k[t]=!1,it(e,i)}function Pt(){k={}}function Rt(){let i;for(i=0;i<26;i++)M["Key"+String.fromCharCode(i+65)]=String.fromCharCode(i+97);for(i=0;i<10;i++)M["Digit"+i]=M["Numpad"+i]=""+i;window.addEventListener("keydown",Dt),window.addEventListener("keyup",Ct),window.addEventListener("blur",Pt)}function T(i){return!![].concat(i).some(t=>k[t])}function $(i){let t=[];return i._dn?t.push(i._dn):i.children&&i.children.map(e=>{t=t.concat($(e))}),t}class Ut{constructor({id:t,name:e=t,objects:s=[],context:r=w(),cullObjects:a=!0,cullFunction:n=Lt,sortFunction:h,...o}){this._o=[],Object.assign(this,{id:t,name:e,context:r,cullObjects:a,cullFunction:n,sortFunction:h,...o});let l=this._dn=document.createElement("section");l.tabIndex=-1,l.style=ht,l.id=t,l.setAttribute("aria-label",e);let d=this;class c extends et{set x(u){d.sx=u-this.centerX,super.x=u}get x(){return super.x}set y(u){d.sy=u-this.centerY,super.y=u}get y(){return super.y}}this.camera=new c({context:r,anchor:{x:.5,y:.5},render:this._rf.bind(this)}),this.add(s),this._i=()=>{this.context??(this.context=w());let p=this.context.canvas,{width:u,height:y}=p,g=u/2,m=y/2;Object.assign(this.camera,{centerX:g,centerY:m,x:g,y:m,width:u,height:y}),this._dn.isConnected||Q(this._dn,p)},this.context&&this._i(),Y("init",this._i)}set objects(t){this.remove(this._o),this.add(t)}get objects(){return this._o}add(...t){t.flat().map(e=>{this._o.push(e),e.parent=this,$(e).map(s=>{this._dn.appendChild(s)})})}remove(...t){t.flat().map(e=>{G(this._o,e),e.parent=null,$(e).map(s=>{Q(s,this.context)})})}show(){this.hidden=this._dn.hidden=!1;let t=this._o.find(e=>e.focus);t?t.focus():this._dn.focus(),this.onShow()}hide(){this.hidden=this._dn.hidden=!0,this.onHide()}destroy(){ot("init",this._i),this._dn.remove(),this._o.map(t=>t.destroy&&t.destroy())}lookAt(t){let{x:e,y:s}=t.world||t;this.camera.x=e,this.camera.y=s}update(t){this.hidden||this._o.map(e=>e.update&&e.update(t))}_rf(){let{_o:t,context:e,_sx:s,_sy:r,camera:a,sortFunction:n,cullObjects:h,cullFunction:o}=this;e.translate(s,r);let l=t;h&&(l=l.filter(d=>o(a,d))),n&&l.sort(n),l.map(d=>d.render&&d.render())}render(){if(!this.hidden){let{context:t,camera:e}=this,{x:s,y:r,centerX:a,centerY:n}=e;t.save(),this._sx=a-s,this._sy=n-r,t.translate(this._sx,this._sy),e.render(),t.restore()}}onShow(){}onHide(){}}function Yt(){return new Ut(...arguments)}function bt(i){if(+i==i)return i;let t=[],e=i.split(".."),s=+e[0],r=+e[1],a=s;if(s<r)for(;a<=r;a++)t.push(a);else for(;a>=r;a--)t.push(a);return t}class kt{constructor({image:t,frameWidth:e,frameHeight:s,frameMargin:r,animations:a}={}){if(!t)throw Error("You must provide an Image for the SpriteSheet");this.animations={},this.image=t,this.frame={width:e,height:s,margin:r},this._f=t.width/e|0,this.createAnimations(a)}createAnimations(t){let e,s;for(s in t){let{frames:r,frameRate:a,loop:n}=t[s];if(e=[],r==null)throw Error("Animation "+s+" must provide a frames property");[].concat(r).map(h=>{e=e.concat(bt(h))}),this.animations[s]=dt({spriteSheet:this,frames:e,frameRate:a,loop:n,name:s})}}}function Xt(){return new kt(...arguments)}function C(i,t){return i/t|0}function P(i,t){return i/t|0}class Ft{constructor(t={}){let{width:e,height:s,tilewidth:r,tileheight:a,tilesets:n}=t,h=e*r,o=s*a,l=document.createElement("canvas");l.width=h,l.height=o,this._c=l,this._ctx=l.getContext("2d"),n.map(d=>{let{__k:c,location:p}=window,u=(c?c.dm.get(t):"")||p.href,{source:y}=d;if(y){if(!c)throw Error('You must use "load" or "loadData" to resolve tileset.source');let m=c.d[c.u(y,u)];if(!m)throw Error(`You must load the tileset source "${y}" before loading the tileset`);Object.keys(m).map(x=>{d[x]=m[x]})}let{image:g}=d;if(""+g===g){if(!c)throw Error('You must use "load" or "loadImage" to resolve tileset.image');let m=c.i[c.u(g,u)];if(!m)throw Error(`You must load the image "${g}" before loading the tileset`);d.image=m}}),Object.assign(this,{context:w(),layerMap:{},layerCanvases:{},mapwidth:h,mapheight:o,_sx:0,_sy:0,_o:[],...t}),this.context&&this._p(),Y("init",()=>{this.context??(this.context=w()),this._p()})}get sx(){return this._sx}get sy(){return this._sy}set sx(t){let e=Math.max(0,this.mapwidth-W().width);this._sx=S(0,e,t)}set sy(t){let e=Math.max(0,this.mapheight-W().height);this._sy=S(0,e,t)}set objects(t){this.remove(this._o),this.add(t)}get objects(){return this._o}add(...t){t.flat().map(e=>{this._o.push(e),e.parent=this})}remove(...t){t.flat().map(e=>{G(this._o,e),e.parent=null})}setTileAtLayer(t,e,s){let{layerMap:r,tileheight:a,tilewidth:n,width:h}=this,{row:o,col:l,x:d,y:c}=e,p=o??C(c,a),u=l??P(d,n);r[t]&&(this._d=!0,r[t]._d=!0,r[t].data[p*h+u]=s)}setLayer(t,e){let{layerMap:s}=this;s[t]&&(this._d=!0,s[t]._d=!0,s[t].data=e)}layerCollidesWith(t,e){let{tilewidth:s,tileheight:r,layerMap:a}=this,{x:n,y:h,width:o,height:l}=tt(e),d=C(h,r),c=P(n,s),p=C(h+l,r),u=P(n+o,s),y=a[t];for(let g=d;g<=p;g++)for(let m=c;m<=u;m++)if(y.data[m+g*this.width])return!0;return!1}tileAtLayer(t,e){let{layerMap:s,tileheight:r,tilewidth:a,width:n}=this,{row:h,col:o,x:l,y:d}=e,c=h??C(d,r),p=o??P(l,a);return s[t]?s[t].data[c*n+p]:-1}render(t=this._c,e=!0){let{_d:s,context:r,sx:a=0,sy:n=0}=this;s&&this._p();let{width:h,height:o}=W(),l=Math.min(t.width,h),d=Math.min(t.height,o);r.drawImage(t,a,n,l,d,0,0,l,d),e&&(r.save(),(a||n)&&r.translate(-a,-n),this.objects.map(c=>c.render&&c.render()),r.restore())}renderLayer(t){let{layerCanvases:e,layerMap:s}=this,r=s[t],a=e[t],n=a==null?void 0:a.getContext("2d");if(!a){let{mapwidth:h,mapheight:o}=this;a=document.createElement("canvas"),n=a.getContext("2d"),a.width=h,a.height=o,e[t]=a,this._r(r,n)}r._d&&(r._d=!1,n.clearRect(0,0,a.width,a.height),this._r(r,n)),this.render(a,!1)}_p(){let{_ctx:t,layers:e=[],layerMap:s}=this;this._d=!1,e.map(r=>{let{name:a,data:n,visible:h}=r;r._d=!1,s[a]=r,n&&h!=!1&&this._r(r,t)})}_r(t,e){let{opacity:s,data:r=[]}=t,{tilesets:a,width:n,tilewidth:h,tileheight:o}=this;e.save(),e.globalAlpha=s,r.map((l,d)=>{if(!l)return;let c;for(let F=a.length-1;F>=0&&(c=a[F],!(l/c.firstgid>=1));F--);let{image:p,margin:u=0,firstgid:y,columns:g}=c,m=l-y,x=g??p.width/(h+u)|0,st=d%n*h,rt=(d/n|0)*o,at=m%x*(h+u),nt=(m/x|0)*(o+u);e.drawImage(p,at,nt,h,o,st,rt,h,o)}),e.restore()}}function Wt(){return new Ft(...arguments)}const Ht=(i,t,e)=>{const s=Yt({id:"grid",objects:[]}),r={x:0,y:0,width:1,height:1,color:"blue",opacity:.5};return s.add(Array(i/e).fill(0).map((a,n)=>V({...r,x:(n+1)*e,height:t}))),s.add(Array(t/e).fill(0).map((a,n)=>V({...r,y:(n+1)*e,width:i}))),s};var X=(i=>(i.TILE="./fantasy-tiles.png",i.PLAYER="./player.png",i))(X||{}),U=(i=>(i.FLOOR="floor",i.WALL="wall",i))(U||{}),f=(i=>(i.IDLEUP="idle_up",i.IDLEDOWN="idle_down",i.IDLELEFT="idle_left",i.IDLERIGHT="idle_right",i.MOVEUP="move_up",i.MOVEDOWN="move_down",i.MOVELEFT="move_left",i.MOVERIGHT="move_right",i))(f||{});const Vt=()=>{const i=Xt({image:_[X.PLAYER],frameWidth:32,frameHeight:32,animations:{[f.IDLEUP]:{frames:[4],loop:!1},[f.IDLEDOWN]:{frames:[1],loop:!1},[f.IDLELEFT]:{frames:[6],loop:!1},[f.IDLERIGHT]:{frames:[8],loop:!1},[f.MOVEUP]:{frames:[3,4,5,4],frameRate:6},[f.MOVEDOWN]:{frames:[0,1,2,1],frameRate:6},[f.MOVELEFT]:{frames:[6,7],frameRate:6},[f.MOVERIGHT]:{frames:[8,9],frameRate:6}}}),t=V({x:32*3,y:32*3,width:32,height:32,stTargetX:0,stTargetY:0,stIsMoving:!1,stMoveSpeed:2,animations:i.animations});return t.customUpdate=e=>{if(t.stIsMoving&&t.x===t.stTargetX&&t.y===t.stTargetY&&(t.stIsMoving=!1,t.dy=0,t.dx=0,t.currentAnimation.name===f.MOVERIGHT?t.playAnimation(f.IDLERIGHT):t.currentAnimation.name===f.MOVELEFT?t.playAnimation(f.IDLELEFT):t.currentAnimation.name===f.MOVEDOWN?t.playAnimation(f.IDLEDOWN):t.currentAnimation.name===f.MOVEUP&&t.playAnimation(f.IDLEUP)),!t.stIsMoving&&T(["arrowup","arrowdown","arrowleft","arrowright"])){t.stTargetX=t.x,t.stTargetY=t.y,T("arrowup")?(t.stTargetY=t.y-32,t.playAnimation(f.IDLEUP)):T("arrowdown")?(t.stTargetY=t.y+32,t.playAnimation(f.IDLEDOWN)):T("arrowleft")?(t.stTargetX=t.x-32,t.playAnimation(f.IDLELEFT)):T("arrowright")&&(t.stTargetX=t.x+32,t.playAnimation(f.IDLERIGHT));const s={width:t.width-2,height:t.height-2,x:t.stTargetX+1,y:t.stTargetY+1};e.layerCollidesWith(U.WALL,s)||(t.stIsMoving=!0,t.stTargetX>t.x?(t.dx=t.stMoveSpeed,t.playAnimation(f.MOVERIGHT)):t.stTargetX<t.x?(t.dx=-1*t.stMoveSpeed,t.playAnimation(f.MOVELEFT)):t.stTargetY>t.y?(t.dy=t.stMoveSpeed,t.playAnimation(f.MOVEDOWN)):t.stTargetY<t.y&&(t.dy=-1*t.stMoveSpeed,t.playAnimation(f.MOVEUP)))}t.update()},t.playAnimation(f.IDLEDOWN),t},$t=()=>Wt({tilewidth:32,tileheight:32,width:10,height:10,tilesets:[{firstgid:1,image:_[X.TILE]}],layers:[{name:U.FLOOR,data:Array(100).fill(10)},{name:U.WALL,data:[...Array(10).fill(8),...Array(4).fill(0).map(()=>[8,0,0,0,0,0,0,0,0,8]).flat(),8,0,0,0,8,24,0,0,0,8,...Array(3).fill(0).map(()=>[8,0,0,0,0,0,0,0,0,8]).flat(),...Array(10).fill(8)]}]});lt("main__canvas");Rt();async function Gt(){await Et(...Object.values(X));const i=$t(),t=Vt(),e=Ht(320,320,32);Mt({update(){t.customUpdate(i)},render(){i.render(),e.render(),t.render()}}).start()}Gt();
